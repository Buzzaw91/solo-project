var t,e,r,n;r=e={exports:{}},n=function(){var t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(e){function r(t,e){throw e}function n(t,e,r){var n=e+r;for(r=e;t[r]&&!(r>=n);)++r;if(16<r-e&&t.subarray&&ot)return ot.decode(t.subarray(e,r));for(n="";e<r;){var a=t[e++];if(128&a){var o=63&t[e++];if(192==(224&a))n+=String.fromCharCode((31&a)<<6|o);else{var i=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&t[e++])?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else n+=String.fromCharCode(a)}return n}function a(t){return 0<t%65536&&(t+=65536-t%65536),t}function o(t){it=t,V.HEAP8=st=new Int8Array(t),V.HEAP16=ut=new Int16Array(t),V.HEAP32=ct=new Int32Array(t),V.HEAPU8=ft=new Uint8Array(t),V.HEAPU16=new Uint16Array(t),V.HEAPU32=new Uint32Array(t),V.HEAPF32=new Float32Array(t),V.HEAPF64=new Float64Array(t)}function i(t){for(;0<t.length;){var e=t.shift();if("function"==typeof e)e();else{var r=e.Jb;"number"==typeof r?void 0===e.gb?V.dynCall_v(r):V.dynCall_vi(r,e.gb):r(void 0===e.gb?null:e.gb)}}}function s(){var t=V.preRun.shift();ht.unshift(t)}function f(t){throw V.onAbort&&V.onAbort(t),q(t),Z(t),at=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}function u(){var t=Pt;return String.prototype.startsWith?t.startsWith("data:application/octet-stream;base64,"):0===t.indexOf("data:application/octet-stream;base64,")}function c(){try{if(J)return new Uint8Array(J);throw"both async and sync fetching of the wasm failed"}catch(t){f(t)}}function l(t,e){for(var r=0,n=t.length-1;0<=n;n--){var a=t[n];"."===a?t.splice(n,1):".."===a?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r;r--)t.unshift("..");return t}function h(t){var e="/"===t.charAt(0),r="/"===t.substr(-1);return(t=l(t.split("/").filter((function(t){return!!t})),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function p(t){var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."}function _(t){if("/"===t)return"/";var e=t.lastIndexOf("/");return-1===e?t:t.substr(e+1)}function d(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){if("string"!=typeof(e=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=l(t.split("/").filter((function(t){return!!t})),!e).join("/"))||"."}function y(t,e){Rt[t]={input:[],Qa:[],Ya:e},B(t,kt)}function v(t,e){if(e=e||{},!(t=d("/",t)))return{path:"",node:null};var r,n={ob:!0,jb:0};for(r in n)void 0===e[r]&&(e[r]=n[r]);if(8<e.jb)throw new Ft(32);t=l(t.split("/").filter((function(t){return!!t})),!1);var a=It;for(n="/",r=0;r<t.length;r++){var o=r===t.length-1;if(o&&e.parent)break;if(a=m(a,t[r]),n=h(n+"/"+t[r]),a.cb&&(!o||o&&e.ob)&&(a=a.cb.root),!o||e.nb)for(o=0;40960==(61440&a.mode);)if(a=U(n),a=v(n=d(p(n),a),{jb:e.jb}).node,40<o++)throw new Ft(32)}return{path:n,node:a}}function w(t){for(var e;;){if(t===t.parent)return t=t.Ta.rb,e?"/"!==t[t.length-1]?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}}function b(t,e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return(t+r>>>0)%Yt.length}function m(t,e){var r;if(r=(r=P(t,"x"))?r:t.Ma.$a?0:2)throw new Ft(r,t);for(r=Yt[b(t.id,e)];r;r=r.Ab){var n=r.name;if(r.parent.id===t.id&&n===e)return r}return t.Ma.$a(t,e)}function g(t,e,r,n){return Mt||((Mt=function(t,e,r,n){t||(t=this),this.parent=t,this.Ta=t.Ta,this.cb=null,this.id=jt++,this.name=e,this.mode=r,this.Ma={},this.Na={},this.eb=n}).prototype={},Object.defineProperties(Mt.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}})),function(t){var e=b(t.parent.id,t.name);t.Ab=Yt[e],Yt[e]=t}(t=new Mt(t,e,r,n)),t}function E(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e}function P(t,e){return Dt?0:(-1===e.indexOf("r")||292&t.mode)&&(-1===e.indexOf("w")||146&t.mode)&&(-1===e.indexOf("x")||73&t.mode)?0:2}function A(t,e){try{return m(t,e),20}catch(t){}return P(t,"wx")}function B(t,e){zt[t]={Na:e}}function T(t,e){var r="/"===e,n=!e;if(r&&It)throw new Ft(10);if(!r&&!n){var a=v(e,{ob:!1});if(e=a.path,(a=a.node).cb)throw new Ft(10);if(16384!=(61440&a.mode))throw new Ft(54)}e={type:t,Qb:{},rb:e,zb:[]},(t=t.Ta(e)).Ta=e,e.root=t,r?It=t:a&&(a.cb=e,a.Ta&&a.Ta.zb.push(e))}function L(t,e,r){var n=v(t,{parent:!0}).node;if(!(t=_(t))||"."===t||".."===t)throw new Ft(28);var a=A(n,t);if(a)throw new Ft(a);if(!n.Ma.bb)throw new Ft(63);return n.Ma.bb(n,t,e,r)}function S(t){L(t,16895,0)}function M(t,e,r){void 0===r&&(r=e,e=438),L(t,8192|e,r)}function x(t,e){if(!d(t))throw new Ft(44);var r=v(e,{parent:!0}).node;if(!r)throw new Ft(44);var n=A(r,e=_(e));if(n)throw new Ft(n);if(!r.Ma.fb)throw new Ft(63);r.Ma.fb(r,e,t)}function U(t){if(!(t=v(t).node))throw new Ft(44);if(!t.Ma.ab)throw new Ft(28);return d(w(t.parent),t.Ma.ab(t))}function R(t,e,r,n){if(""===t)throw new Ft(44);if("string"==typeof e){var a=Vt[e];if(void 0===a)throw Error("Unknown file open mode: "+e);e=a}if(r=64&e?4095&(void 0===r?438:r)|32768:0,"object"==typeof t)var o=t;else{t=h(t);try{o=v(t,{nb:!(131072&e)}).node}catch(t){}}if(a=!1,64&e)if(o){if(128&e)throw new Ft(20)}else o=L(t,r,0),a=!0;if(!o)throw new Ft(44);if(8192==(61440&o.mode)&&(e&=-513),65536&e&&16384!=(61440&o.mode))throw new Ft(54);if(!a&&(r=o?40960==(61440&o.mode)?32:16384==(61440&o.mode)&&("r"!==E(e)||512&e)?31:P(o,E(e)):44))throw new Ft(r);if(512&e){var i;if(!(i="string"==typeof(r=o)?v(r,{nb:!0}).node:r).Ma.Sa)throw new Ft(63);if(16384==(61440&i.mode))throw new Ft(31);if(32768!=(61440&i.mode))throw new Ft(28);if(r=P(i,"w"))throw new Ft(r);i.Ma.Sa(i,{size:0,timestamp:Date.now()})}e&=-641,(n=function(t,e){xt||((xt=function(){}).prototype={},Object.defineProperties(xt.prototype,{object:{get:function(){return this.node},set:function(t){this.node=t}}}));var r,n=new xt;for(r in t)n[r]=t[r];return t=n,e=function(t){for(t=t||0;4096>=t;t++)if(!Ht[t])return t;throw new Ft(33)}(e),t.Va=e,Ht[e]=t}({node:o,path:w(o),flags:e,seekable:!0,position:0,Na:o.Na,Db:[],error:!1},n)).Na.open&&n.Na.open(n),!V.logReadFiles||1&e||(Ut||(Ut={}),t in Ut||(Ut[t]=1,console.log("FS.trackingDelegate error on read file: "+t)));try{Kt.onOpenFile&&(o=0,1!=(2097155&e)&&(o|=1),0!=(2097155&e)&&(o|=2),Kt.onOpenFile(t,o))}catch(e){console.log("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return n}function k(t,e,r){if(null===t.Va)throw new Ft(8);if(!t.seekable||!t.Na.Xa)throw new Ft(70);if(0!=r&&1!=r&&2!=r)throw new Ft(28);t.position=t.Na.Xa(t,e,r),t.Db=[]}function N(t,e,r,n){var a=st;if(0>r||0>n)throw new Ft(28);if(null===t.Va)throw new Ft(8);if(1==(2097155&t.flags))throw new Ft(8);if(16384==(61440&t.node.mode))throw new Ft(31);if(!t.Na.read)throw new Ft(28);var o=void 0!==n;if(o){if(!t.seekable)throw new Ft(70)}else n=t.position;return e=t.Na.read(t,a,e,r,n),o||(t.position+=e),e}function C(){Ft||((Ft=function(t,e){this.node=e,this.Cb=function(t){this.Ua=t},this.Cb(t),this.message="FS error"}).prototype=Error(),Ft.prototype.constructor=Ft,[44].forEach((function(t){Wt[t]=new Ft(t),Wt[t].stack="<generic error, no stack>"})))}function O(t,e,r){t=h("/dev/"+t);var n=function(t,e){var r=0;return t&&(r|=365),e&&(r|=146),r}(!!e,!!r);St||(St=64);var a=St++<<8|0;B(a,{open:function(t){t.seekable=!1},close:function(){r&&r.buffer&&r.buffer.length&&r(10)},read:function(t,r,n,a){for(var o=0,i=0;i<a;i++){try{var s=e()}catch(t){throw new Ft(29)}if(void 0===s&&0===o)throw new Ft(6);if(null==s)break;o++,r[n+i]=s}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,a){for(var o=0;o<a;o++)try{r(e[n+o])}catch(t){throw new Ft(29)}return a&&(t.node.timestamp=Date.now()),o}}),M(t,n,a)}function I(){return ct[(Xt+=4)-4>>2]}function z(t){if(t||(t=I()),!(t=Ht[t]))throw new Ft(8);return t}function H(t){try{var e=z(t);if(null===e.Va)throw new Ft(8);e.hb&&(e.hb=null);try{e.Na.close&&e.Na.close(e)}catch(t){throw t}finally{Ht[e.Va]=null}return e.Va=null,0}catch(t){return void 0!==Qt&&t instanceof Ft||f(t),t.Ua}}function j(t,e,r,n){try{t:{for(var a=z(t),o=t=0;o<r;o++){var i=a,s=ct[e+8*o>>2],u=ct[e+(8*o+4)>>2],c=void 0,l=st;if(0>u||0>c)throw new Ft(28);if(null===i.Va)throw new Ft(8);if(0==(2097155&i.flags))throw new Ft(8);if(16384==(61440&i.node.mode))throw new Ft(31);if(!i.Na.write)throw new Ft(28);1024&i.flags&&k(i,0,2);var h=void 0!==c;if(h){if(!i.seekable)throw new Ft(70)}else c=i.position;var p=i.Na.write(i,l,s,u,c,void 0);h||(i.position+=p);try{i.path&&Kt.onWriteToFile&&Kt.onWriteToFile(i.path)}catch(t){console.log("FS.trackingDelegate['onWriteToFile']('"+i.path+"') threw an exception: "+t.message)}if(0>(i=p)){var _=-1;break t}t+=i}_=t}return ct[n>>2]=_,0}catch(t){return void 0!==Qt&&t instanceof Ft||f(t),t.Ua}}function Y(){return st.length}function D(t,e){throw Gt(t,e||1),"longjmp"}function K(){return K.Za||(K.Za=[]),K.Za.push(re()),K.Za.length-1}function F(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function W(){function t(){if(!te&&(te=!0,!at)){if(V.noFSInit||Lt||(Lt=!0,C(),V.stdin=V.stdin,V.stdout=V.stdout,V.stderr=V.stderr,V.stdin?O("stdin",V.stdin):x("/dev/tty","/dev/stdin"),V.stdout?O("stdout",null,V.stdout):x("/dev/tty","/dev/stdout"),V.stderr?O("stderr",null,V.stderr):x("/dev/tty1","/dev/stderr"),R("/dev/stdin","r"),R("/dev/stdout","w"),R("/dev/stderr","w")),i(pt),Dt=!1,i(_t),V.onRuntimeInitialized&&V.onRuntimeInitialized(),V.postRun)for("function"==typeof V.postRun&&(V.postRun=[V.postRun]);V.postRun.length;){var t=V.postRun.shift();dt.unshift(t)}i(dt)}}if(!(0<mt)){if(V.preRun)for("function"==typeof V.preRun&&(V.preRun=[V.preRun]);V.preRun.length;)s();i(ht),0<mt||(V.setStatus?(V.setStatus("Running..."),setTimeout((function(){setTimeout((function(){V.setStatus("")}),1),t()}),1)):t())}}var V;e=e||{},V||(V=void 0!==e?e:{});var $,Q={};for($ in V)V.hasOwnProperty($)&&(Q[$]=V[$]);var X="";document.currentScript&&(X=document.currentScript.src),t&&(X=t),X=0!==X.indexOf("blob:")?X.substr(0,X.lastIndexOf("/")+1):"";var q=V.print||console.log.bind(console),Z=V.printErr||console.warn.bind(console);for($ in Q)Q.hasOwnProperty($)&&(V[$]=Q[$]);Q=null,V.quit&&(r=V.quit);var J,G,tt={"f64-rem":function(t,e){return t%e},debugger:function(){}},et=0;V.wasmBinary&&(J=V.wasmBinary),V.noExitRuntime&&(G=V.noExitRuntime),"object"!=typeof WebAssembly&&Z("no native wasm support detected");var rt,nt=new WebAssembly.Table({initial:462,maximum:462,element:"anyfunc"}),at=!1,ot="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var it,st,ft,ut,ct,lt=V.TOTAL_MEMORY||16777216;(rt=V.wasmMemory?V.wasmMemory:new WebAssembly.Memory({initial:lt/65536}))&&(it=rt.buffer),lt=it.byteLength,o(it),ct[15676]=5305792;var ht=[],pt=[],_t=[],dt=[],yt=Math.abs,vt=Math.ceil,wt=Math.floor,bt=Math.min,mt=0,gt=null,Et=null;V.preloadedImages={},V.preloadedAudios={};var Pt="libpythia.browser.wasm";if(!u()){var At=Pt;Pt=V.locateFile?V.locateFile(At,X):X+At}V.asm=function(){function t(t){V.asm=t.exports,mt--,V.monitorRunDependencies&&V.monitorRunDependencies(mt),0==mt&&(null!==gt&&(clearInterval(gt),gt=null),Et&&(t=Et,Et=null,t()))}function e(e){t(e.instance)}function r(t){return(J||"function"!=typeof fetch?new Promise((function(t){t(c())})):fetch(Pt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Pt+"'";return t.arrayBuffer()})).catch((function(){return c()}))).then((function(t){return WebAssembly.instantiate(t,n)})).then(t,(function(t){Z("failed to asynchronously prepare wasm: "+t),f(t)}))}var n={env:qt,wasi_unstable:qt,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:tt};if(mt++,V.monitorRunDependencies&&V.monitorRunDependencies(mt),V.instantiateWasm)try{return V.instantiateWasm(n,t)}catch(t){return Z("Module.instantiateWasm callback failed with error: "+t),!1}return function(){if(J||"function"!=typeof WebAssembly.instantiateStreaming||u()||"function"!=typeof fetch)return r(e);fetch(Pt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,n).then(e,(function(t){Z("wasm streaming compile failed: "+t),Z("falling back to ArrayBuffer instantiation"),r(e)}))}))}(),{}};var Bt,Tt,Lt,St,Mt,xt,Ut,Rt=[],kt={open:function(t){var e=Rt[t.node.eb];if(!e)throw new Ft(43);t.Pa=e,t.seekable=!1},close:function(t){t.Pa.Ya.flush(t.Pa)},flush:function(t){t.Pa.Ya.flush(t.Pa)},read:function(t,e,r,n){if(!t.Pa||!t.Pa.Ya.pb)throw new Ft(60);for(var a=0,o=0;o<n;o++){try{var i=t.Pa.Ya.pb(t.Pa)}catch(t){throw new Ft(29)}if(void 0===i&&0===a)throw new Ft(6);if(null==i)break;a++,e[r+o]=i}return a&&(t.node.timestamp=Date.now()),a},write:function(t,e,r,n){if(!t.Pa||!t.Pa.Ya.ib)throw new Ft(60);try{for(var a=0;a<n;a++)t.Pa.Ya.ib(t.Pa,e[r+a])}catch(t){throw new Ft(29)}return n&&(t.node.timestamp=Date.now()),a}},Nt={pb:function(t){if(!t.input.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n"),!e)return null;for(var r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++n)),127>=a?++r:r=2047>=a?r+2:65535>=a?r+3:r+4}var o=(r=Array(r+1)).length;if(n=0,0<o){a=n,o=n+o-1;for(var i=0;i<e.length;++i){var s=e.charCodeAt(i);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),127>=s){if(n>=o)break;r[n++]=s}else{if(2047>=s){if(n+1>=o)break;r[n++]=192|s>>6}else{if(65535>=s){if(n+2>=o)break;r[n++]=224|s>>12}else{if(n+3>=o)break;r[n++]=240|s>>18,r[n++]=128|s>>12&63}r[n++]=128|s>>6&63}r[n++]=128|63&s}}r[n]=0,e=n-a}else e=0;r.length=e,t.input=r}return t.input.shift()},ib:function(t,e){null===e||10===e?(q(n(t.Qa,0)),t.Qa=[]):0!=e&&t.Qa.push(e)},flush:function(t){t.Qa&&0<t.Qa.length&&(q(n(t.Qa,0)),t.Qa=[])}},Ct={ib:function(t,e){null===e||10===e?(Z(n(t.Qa,0)),t.Qa=[]):0!=e&&t.Qa.push(e)},flush:function(t){t.Qa&&0<t.Qa.length&&(Z(n(t.Qa,0)),t.Qa=[])}},Ot={Ra:null,Ta:function(){return Ot.createNode(null,"/",16895,0)},createNode:function(t,e,r,n){if(24576==(61440&r)||4096==(61440&r))throw new Ft(63);return Ot.Ra||(Ot.Ra={dir:{node:{Wa:Ot.Ma.Wa,Sa:Ot.Ma.Sa,$a:Ot.Ma.$a,bb:Ot.Ma.bb,ub:Ot.Ma.ub,wb:Ot.Ma.wb,vb:Ot.Ma.vb,tb:Ot.Ma.tb,fb:Ot.Ma.fb},stream:{Xa:Ot.Na.Xa}},file:{node:{Wa:Ot.Ma.Wa,Sa:Ot.Ma.Sa},stream:{Xa:Ot.Na.Xa,read:Ot.Na.read,write:Ot.Na.write,kb:Ot.Na.kb,qb:Ot.Na.qb,sb:Ot.Na.sb}},link:{node:{Wa:Ot.Ma.Wa,Sa:Ot.Ma.Sa,ab:Ot.Ma.ab},stream:{}},lb:{node:{Wa:Ot.Ma.Wa,Sa:Ot.Ma.Sa},stream:$t}}),16384==(61440&(r=g(t,e,r,n)).mode)?(r.Ma=Ot.Ra.dir.node,r.Na=Ot.Ra.dir.stream,r.La={}):32768==(61440&r.mode)?(r.Ma=Ot.Ra.file.node,r.Na=Ot.Ra.file.stream,r.Oa=0,r.La=null):40960==(61440&r.mode)?(r.Ma=Ot.Ra.link.node,r.Na=Ot.Ra.link.stream):8192==(61440&r.mode)&&(r.Ma=Ot.Ra.lb.node,r.Na=Ot.Ra.lb.stream),r.timestamp=Date.now(),t&&(t.La[e]=r),r},Kb:function(t){if(t.La&&t.La.subarray){for(var e=[],r=0;r<t.Oa;++r)e.push(t.La[r]);return e}return t.La},Lb:function(t){return t.La?t.La.subarray?t.La.subarray(0,t.Oa):new Uint8Array(t.La):new Uint8Array},mb:function(t,e){var r=t.La?t.La.length:0;r>=e||(e=Math.max(e,r*(1048576>r?2:1.125)|0),0!=r&&(e=Math.max(e,256)),r=t.La,t.La=new Uint8Array(e),0<t.Oa&&t.La.set(r.subarray(0,t.Oa),0))},Bb:function(t,e){if(t.Oa!=e)if(0==e)t.La=null,t.Oa=0;else{if(!t.La||t.La.subarray){var r=t.La;t.La=new Uint8Array(new ArrayBuffer(e)),r&&t.La.set(r.subarray(0,Math.min(e,t.Oa)))}else if(t.La||(t.La=[]),t.La.length>e)t.La.length=e;else for(;t.La.length<e;)t.La.push(0);t.Oa=e}},Ma:{Wa:function(t){var e={};return e.Ib=8192==(61440&t.mode)?t.id:1,e.Nb=t.id,e.mode=t.mode,e.Pb=1,e.uid=0,e.Mb=0,e.eb=t.eb,16384==(61440&t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.Oa:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.Fb=new Date(t.timestamp),e.Ob=new Date(t.timestamp),e.Hb=new Date(t.timestamp),e.xb=4096,e.Gb=Math.ceil(e.size/e.xb),e},Sa:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&Ot.Bb(t,e.size)},$a:function(){throw Wt[44]},bb:function(t,e,r,n){return Ot.createNode(t,e,r,n)},ub:function(t,e,r){if(16384==(61440&t.mode)){try{var n=m(e,r)}catch(t){}if(n)for(var a in n.La)throw new Ft(55)}delete t.parent.La[t.name],t.name=r,e.La[r]=t,t.parent=e},wb:function(t,e){delete t.La[e]},vb:function(t,e){var r,n=m(t,e);for(r in n.La)throw new Ft(55);delete t.La[e]},tb:function(t){var e,r=[".",".."];for(e in t.La)t.La.hasOwnProperty(e)&&r.push(e);return r},fb:function(t,e,r){return(t=Ot.createNode(t,e,41471,0)).link=r,t},ab:function(t){if(40960!=(61440&t.mode))throw new Ft(28);return t.link}},Na:{read:function(t,e,r,n,a){var o=t.node.La;if(a>=t.node.Oa)return 0;if(8<(t=Math.min(t.node.Oa-a,n))&&o.subarray)e.set(o.subarray(a,a+t),r);else for(n=0;n<t;n++)e[r+n]=o[a+n];return t},write:function(t,e,r,n,a,o){if(o=!1,!n)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.La||t.La.subarray)){if(o)return t.La=e.subarray(r,r+n),t.Oa=n;if(0===t.Oa&&0===a)return t.La=new Uint8Array(e.subarray(r,r+n)),t.Oa=n;if(a+n<=t.Oa)return t.La.set(e.subarray(r,r+n),a),n}if(Ot.mb(t,a+n),t.La.subarray&&e.subarray)t.La.set(e.subarray(r,r+n),a);else for(o=0;o<n;o++)t.La[a+o]=e[r+o];return t.Oa=Math.max(t.Oa,a+n),n},Xa:function(t,e,r){if(1===r?e+=t.position:2===r&&32768==(61440&t.node.mode)&&(e+=t.node.Oa),0>e)throw new Ft(28);return e},kb:function(t,e,r){Ot.mb(t.node,e+r),t.node.Oa=Math.max(t.node.Oa,e+r)},qb:function(t,e,r,n,a,o,i){if(32768!=(61440&t.node.mode))throw new Ft(43);if(r=t.node.La,2&i||r.buffer!==e&&r.buffer!==e.buffer){if((0<a||a+n<t.node.Oa)&&(r=r.subarray?r.subarray(a,a+n):Array.prototype.slice.call(r,a,a+n)),t=!0,a=e.buffer==st.buffer,!(n=Jt(n)))throw new Ft(48);(a?st:e).set(r,n)}else t=!1,n=r.byteOffset;return{Rb:n,Eb:t}},sb:function(t,e,r,n,a){if(32768!=(61440&t.node.mode))throw new Ft(43);return 2&a?0:(Ot.Na.write(t,e,0,n,r,!1),0)}}},It=null,zt={},Ht=[],jt=1,Yt=null,Dt=!0,Kt={},Ft=null,Wt={},Vt={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},$t={open:function(t){t.Na=zt[t.node.eb].Na,t.Na.open&&t.Na.open(t)},Xa:function(){throw new Ft(70)}},Qt={},Xt=0;C(),Yt=Array(4096),T(Ot,"/"),S("/tmp"),S("/home"),S("/home/web_user"),function(){if(S("/dev"),B(259,{read:function(){return 0},write:function(t,e,r,n){return n}}),M("/dev/null",259),y(1280,Nt),y(1536,Ct),M("/dev/tty",1280),M("/dev/tty1",1536),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues)var t=new Uint8Array(1),e=function(){return crypto.getRandomValues(t),t[0]};e||(e=function(){f("random_device")}),O("random",e),O("urandom",e),S("/dev/shm"),S("/dev/shm/tmp")}(),S("/proc"),S("/proc/self"),S("/proc/self/fd"),T({Ta:function(){var t=g("/proc/self","fd",16895,73);return t.Ma={$a:function(t,e){var r=Ht[+e];if(!r)throw new Ft(8);return(t={parent:null,Ta:{rb:"fake"},Ma:{ab:function(){return r.path}}}).parent=t}},t}},"/proc/self/fd");var qt={u:function(){},J:function(t,e){Xt=e;try{var r=z(),n=I(),a=I(),o=I(),i=I();return-9007199254740992>=(t=4294967296*n+(a>>>0))||9007199254740992<=t?-61:(k(r,t,i),Tt=[r.position>>>0,(Bt=r.position,1<=+yt(Bt)?0<Bt?(0|bt(+wt(Bt/4294967296),4294967295))>>>0:~~+vt((Bt-+(~~Bt>>>0))/4294967296)>>>0:0)],ct[o>>2]=Tt[0],ct[o+4>>2]=Tt[1],r.hb&&0===t&&0===i&&(r.hb=null),0)}catch(t){return void 0!==Qt&&t instanceof Ft||f(t),-t.Ua}},I:function(t,e){Xt=e;try{var r=z(),n=I();t:{var a=I();for(e=t=0;e<a;e++){var o=ct[n+(8*e+4)>>2],i=N(r,ct[n+8*e>>2],o,void 0);if(0>i){var s=-1;break t}if(t+=i,i<o)break}s=t}return s}catch(t){return void 0!==Qt&&t instanceof Ft||f(t),-t.Ua}},x:function(t,e){Xt=e;try{var r=z();switch(I()){case 0:var n=I();return 0>n?-28:R(r.path,r.flags,0,n).Va;case 1:case 2:return 0;case 3:return r.flags;case 4:return n=I(),r.flags|=n,0;case 12:return n=I(),ut[n+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return V.___errno_location&&(ct[V.___errno_location()>>2]=28),-1;default:return-28}}catch(t){return void 0!==Qt&&t instanceof Ft||f(t),-t.Ua}},H:function(t,e){Xt=e;try{return N(z(),I(),I())}catch(t){return void 0!==Qt&&t instanceof Ft||f(t),-t.Ua}},w:function(t,e){Xt=e;try{var r=I();return R(r?n(ft,r,void 0):"",I(),I()).Va}catch(t){return void 0!==Qt&&t instanceof Ft||f(t),-t.Ua}},G:function(t,e){Xt=e;try{var r=z(),n=I();switch(n){case 21509:case 21505:return r.Pa?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.Pa?0:-59;case 21519:if(!r.Pa)return-59;var a=I();return ct[a>>2]=0;case 21520:return r.Pa?-28:-59;case 21531:if(t=I(),!r.Na.yb)throw new Ft(59);return r.Na.yb(r,n,t);case 21523:case 21524:return r.Pa?0:-59;default:f("bad ioctl syscall "+n)}}catch(t){return void 0!==Qt&&t instanceof Ft||f(t),-t.Ua}},t:function(){},s:function(){return H.apply(null,arguments)},F:function(){return j.apply(null,arguments)},__memory_base:1024,__table_base:0,E:function(){f()},D:Y,C:function(t,e){D(t,e)},B:function(t,e,r){ft.set(ft.subarray(e,e+r),t)},A:function(t){if(2147418112<t)return!1;for(var e=Math.max(Y(),16777216);e<t;)e=536870912>=e?a(2*e):Math.min(a((3*e+2147483648)/4),2147418112);t:{try{rt.grow(e-it.byteLength+65535>>16),o(rt.buffer),t=1;break t}catch(t){}t=void 0}return!!t},j:function(t){!G&&(at=!0,V.onExit)&&V.onExit(t),r(t,new F(t))},v:function(t){var e=Date.now();return ct[t>>2]=e/1e3|0,ct[t+4>>2]=e%1e3*1e3|0,0},o:function(t){var e=K.Za[t];K.Za.splice(t,1),ee(e)},q:K,b:D,m:f,a:function(){return et},g:function(t){var e=re();try{return ne(t)}catch(t){if(ee(e),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},i:function(t,e){var r=re();try{return ae(t,e)}catch(t){if(ee(r),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},h:function(t,e,r){var n=re();try{return oe(t,e,r)}catch(t){if(ee(n),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},p:function(t,e,r,n){var a=re();try{return ie(t,e,r,n)}catch(t){if(ee(a),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},z:function(t,e,r,n,a){var o=re();try{return se(t,e,r,n,a)}catch(t){if(ee(o),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},l:function(t){var e=re();try{fe(t)}catch(t){if(ee(e),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},d:function(t,e){var r=re();try{ue(t,e)}catch(t){if(ee(r),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},e:function(t,e,r){var n=re();try{ce(t,e,r)}catch(t){if(ee(n),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},f:function(t,e,r,n){var a=re();try{le(t,e,r,n)}catch(t){if(ee(a),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},k:function(t,e,r,n,a){var o=re();try{he(t,e,r,n,a)}catch(t){if(ee(o),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},r:function(t,e,r,n,a,o){var i=re();try{pe(t,e,r,n,a,o)}catch(t){if(ee(i),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},n:function(t,e,r,n,a,o,i){var s=re();try{_e(t,e,r,n,a,o,i)}catch(t){if(ee(s),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},K:function(t,e,r,n,a,o,i,s){var f=re();try{de(t,e,r,n,a,o,i,s)}catch(t){if(ee(f),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},y:function(t,e,r,n,a,o,i,s,f){var u=re();try{ye(t,e,r,n,a,o,i,s,f)}catch(t){if(ee(u),t!==t+0&&"longjmp"!==t)throw t;Gt(1,0)}},memory:rt,c:function(t){et=t},table:nt},Zt=V.asm({},qt,it);V.asm=Zt,V.___errno_location=function(){return V.asm.L.apply(null,arguments)},V._free=function(){return V.asm.M.apply(null,arguments)};var Jt=V._malloc=function(){return V.asm.N.apply(null,arguments)},Gt=V._setThrew=function(){return V.asm.O.apply(null,arguments)};V._vsc_buffer_bytes=function(){return V.asm.P.apply(null,arguments)},V._vsc_buffer_data=function(){return V.asm.Q.apply(null,arguments)},V._vsc_buffer_delete=function(){return V.asm.R.apply(null,arguments)},V._vsc_buffer_len=function(){return V.asm.S.apply(null,arguments)},V._vsc_buffer_make_secure=function(){return V.asm.T.apply(null,arguments)},V._vsc_buffer_new=function(){return V.asm.U.apply(null,arguments)},V._vsc_buffer_new_with_capacity=function(){return V.asm.V.apply(null,arguments)},V._vsc_data=function(){return V.asm.W.apply(null,arguments)},V._vsc_data_bytes=function(){return V.asm.X.apply(null,arguments)},V._vsc_data_ctx_size=function(){return V.asm.Y.apply(null,arguments)},V._vsc_data_len=function(){return V.asm.Z.apply(null,arguments)},V._vscp_error_ctx_size=function(){return V.asm._.apply(null,arguments)},V._vscp_error_reset=function(){return V.asm.$.apply(null,arguments)},V._vscp_error_status=function(){return V.asm.aa.apply(null,arguments)},V._vscp_pythia_blind=function(){return V.asm.ba.apply(null,arguments)},V._vscp_pythia_blinded_password_buf_len=function(){return V.asm.ca.apply(null,arguments)},V._vscp_pythia_blinding_secret_buf_len=function(){return V.asm.da.apply(null,arguments)},V._vscp_pythia_cleanup=function(){return V.asm.ea.apply(null,arguments)},V._vscp_pythia_compute_transformation_key_pair=function(){return V.asm.fa.apply(null,arguments)},V._vscp_pythia_configure=function(){return V.asm.ga.apply(null,arguments)},V._vscp_pythia_deblind=function(){return V.asm.ha.apply(null,arguments)},V._vscp_pythia_deblinded_password_buf_len=function(){return V.asm.ia.apply(null,arguments)},V._vscp_pythia_get_password_update_token=function(){return V.asm.ja.apply(null,arguments)},V._vscp_pythia_password_update_token_buf_len=function(){return V.asm.ka.apply(null,arguments)},V._vscp_pythia_proof_value_buf_len=function(){return V.asm.la.apply(null,arguments)},V._vscp_pythia_prove=function(){return V.asm.ma.apply(null,arguments)},V._vscp_pythia_transform=function(){return V.asm.na.apply(null,arguments)},V._vscp_pythia_transformation_private_key_buf_len=function(){return V.asm.oa.apply(null,arguments)},V._vscp_pythia_transformation_public_key_buf_len=function(){return V.asm.pa.apply(null,arguments)},V._vscp_pythia_transformed_password_buf_len=function(){return V.asm.qa.apply(null,arguments)},V._vscp_pythia_transformed_tweak_buf_len=function(){return V.asm.ra.apply(null,arguments)},V._vscp_pythia_update_deblinded_with_token=function(){return V.asm.sa.apply(null,arguments)},V._vscp_pythia_verify=function(){return V.asm.ta.apply(null,arguments)},V.stackAlloc=function(){return V.asm.Ia.apply(null,arguments)};var te,ee=V.stackRestore=function(){return V.asm.Ja.apply(null,arguments)},re=V.stackSave=function(){return V.asm.Ka.apply(null,arguments)},ne=V.dynCall_i=function(){return V.asm.ua.apply(null,arguments)},ae=V.dynCall_ii=function(){return V.asm.va.apply(null,arguments)},oe=V.dynCall_iii=function(){return V.asm.wa.apply(null,arguments)},ie=V.dynCall_iiii=function(){return V.asm.xa.apply(null,arguments)},se=V.dynCall_iiiii=function(){return V.asm.ya.apply(null,arguments)},fe=V.dynCall_v=function(){return V.asm.za.apply(null,arguments)},ue=V.dynCall_vi=function(){return V.asm.Aa.apply(null,arguments)},ce=V.dynCall_vii=function(){return V.asm.Ba.apply(null,arguments)},le=V.dynCall_viii=function(){return V.asm.Ca.apply(null,arguments)},he=V.dynCall_viiii=function(){return V.asm.Da.apply(null,arguments)},pe=V.dynCall_viiiii=function(){return V.asm.Ea.apply(null,arguments)},_e=V.dynCall_viiiiii=function(){return V.asm.Fa.apply(null,arguments)},de=V.dynCall_viiiiiii=function(){return V.asm.Ga.apply(null,arguments)},ye=V.dynCall_viiiiiiii=function(){return V.asm.Ha.apply(null,arguments)};if(V.asm=Zt,V.then=function(t){if(te)t(V);else{var e=V.onRuntimeInitialized;V.onRuntimeInitialized=function(){e&&e(),t(V)}}return V},Et=function t(){te||W(),te||(Et=t)},V.run=W,V.preInit)for("function"==typeof V.preInit&&(V.preInit=[V.preInit]);0<V.preInit.length;)V.preInit.pop()();return G=!0,W(),e}}(),r.exports=n,t=e.exports;var a=()=>{class t extends Error{constructor(t){super(t),this.name="PythiaError",this.message=t}static handleStatusCode(e){if(0!=e){if(-1==e)throw new t("This error should not be returned if assertions is enabled.");if(-200==e)throw new t("Underlying pythia library returns -1.");if(-202==e)throw new t("Underlying random number generator failed.");throw new t("Unexpected status code:"+e)}}}return t};function o(t,e){if(!("number"==typeof e||e instanceof Number))throw new TypeError(`'${t}' is not a number`);if(Number.isNaN(e))throw new TypeError(`'${t}' is NaN`);if(1/0===e)throw new TypeError(`'${t}' is Infinity`);if(-1/0===e)throw new TypeError(`'${t}' is -Infinity`)}function i(t,e){if(o(t,e),0==e)throw new TypeError(`'${t}' is NULL`)}var s={ensureNumber:o,ensureString:function(t,e){if(!("string"==typeof e||e instanceof String))throw new TypeError(`'${t}' is not a string`)},ensureBoolean:function(t,e){if("boolean"!=typeof e)throw new TypeError(`'${t}' is not a boolean`)},ensureByteArray:function(t,e){if(!(e instanceof Uint8Array))throw new TypeError(`'${t}' is not an Uint8Array`)},ensureClass:function(t,e,r){if(!(e instanceof r))throw new TypeError(`'${t}' is not an instance of the class ${r.name}`);i(t,e.ctxPtr)},ensureNotNull:i,ensureImplementInterface:function(t,e,r,n,a){if(i(t,e.ctxPtr),!a.isImplemented(e.ctxPtr,n))throw new TypeError(`'${t}' does not implement interface '${r}'`)}},f=()=>{const e=new t;return new Promise((t,r)=>{e.onRuntimeInitialized=()=>{const r={};r.PythiaError=a(),r.Pythia=((t,e)=>{class r{static configure(){const r=t._vscp_pythia_configure();e.PythiaError.handleStatusCode(r)}static cleanup(){t._vscp_pythia_cleanup()}static blindedPasswordBufLen(){return t._vscp_pythia_blinded_password_buf_len()}static deblindedPasswordBufLen(){return t._vscp_pythia_deblinded_password_buf_len()}static blindingSecretBufLen(){return t._vscp_pythia_blinding_secret_buf_len()}static transformationPrivateKeyBufLen(){return t._vscp_pythia_transformation_private_key_buf_len()}static transformationPublicKeyBufLen(){return t._vscp_pythia_transformation_public_key_buf_len()}static transformedPasswordBufLen(){return t._vscp_pythia_transformed_password_buf_len()}static transformedTweakBufLen(){return t._vscp_pythia_transformed_tweak_buf_len()}static proofValueBufLen(){return t._vscp_pythia_proof_value_buf_len()}static passwordUpdateTokenBufLen(){return t._vscp_pythia_password_update_token_buf_len()}static blind(n){s.ensureByteArray("password",n);var a=n.length*n.BYTES_PER_ELEMENT;const o=t._malloc(a);t.HEAP8.set(n,o),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,o,a),a=r.blindedPasswordBufLen(),a=t._vsc_buffer_new_with_capacity(a);var i=r.blindingSecretBufLen();i=t._vsc_buffer_new_with_capacity(i);try{const r=t._vscp_pythia_blind(n,a,i);e.PythiaError.handleStatusCode(r);const o=t._vsc_buffer_bytes(a),s=t._vsc_buffer_len(a),f=t.HEAPU8.slice(o,o+s),u=t._vsc_buffer_bytes(i),c=t._vsc_buffer_len(i);return{blindedPassword:f,blindingSecret:t.HEAPU8.slice(u,u+c)}}finally{t._free(r),t._free(n),t._vsc_buffer_delete(a),t._vsc_buffer_delete(i)}}static deblind(n,a){s.ensureByteArray("transformedPassword",n),s.ensureByteArray("blindingSecret",a);var o=n.length*n.BYTES_PER_ELEMENT;const i=t._malloc(o);t.HEAP8.set(n,i),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,i,o);var f=a.length*a.BYTES_PER_ELEMENT;o=t._malloc(f),t.HEAP8.set(a,o),a=t._vsc_data_ctx_size(),a=t._malloc(a),t._vsc_data(a,o,f),f=r.deblindedPasswordBufLen(),f=t._vsc_buffer_new_with_capacity(f);try{const r=t._vscp_pythia_deblind(n,a,f);e.PythiaError.handleStatusCode(r);const o=t._vsc_buffer_bytes(f),i=t._vsc_buffer_len(f);return t.HEAPU8.slice(o,o+i)}finally{t._free(o),t._free(n),t._free(r),t._free(a),t._vsc_buffer_delete(f)}}static computeTransformationKeyPair(n,a,o){s.ensureByteArray("transformationKeyId",n),s.ensureByteArray("pythiaSecret",a),s.ensureByteArray("pythiaScopeSecret",o);var i=n.length*n.BYTES_PER_ELEMENT;const f=t._malloc(i);t.HEAP8.set(n,f),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,f,i);var u=a.length*a.BYTES_PER_ELEMENT;i=t._malloc(u),t.HEAP8.set(a,i),a=t._vsc_data_ctx_size(),a=t._malloc(a),t._vsc_data(a,i,u);var c=o.length*o.BYTES_PER_ELEMENT;u=t._malloc(c),t.HEAP8.set(o,u),o=t._vsc_data_ctx_size(),o=t._malloc(o),t._vsc_data(o,u,c),c=r.transformationPrivateKeyBufLen(),c=t._vsc_buffer_new_with_capacity(c);var l=r.transformationPublicKeyBufLen();l=t._vsc_buffer_new_with_capacity(l);try{const r=t._vscp_pythia_compute_transformation_key_pair(n,a,o,c,l);e.PythiaError.handleStatusCode(r);const i=t._vsc_buffer_bytes(c),s=t._vsc_buffer_len(c),f=t.HEAPU8.slice(i,i+s),u=t._vsc_buffer_bytes(l),h=t._vsc_buffer_len(l);return{transformationPrivateKey:f,transformationPublicKey:t.HEAPU8.slice(u,u+h)}}finally{t._free(r),t._free(n),t._free(i),t._free(a),t._free(s),t._free(o),t._vsc_buffer_delete(c),t._vsc_buffer_delete(l)}}static transform(n,a,o){s.ensureByteArray("blindedPassword",n),s.ensureByteArray("tweak",a),s.ensureByteArray("transformationPrivateKey",o);var i=n.length*n.BYTES_PER_ELEMENT;const f=t._malloc(i);t.HEAP8.set(n,f),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,f,i);var u=a.length*a.BYTES_PER_ELEMENT;i=t._malloc(u),t.HEAP8.set(a,i),a=t._vsc_data_ctx_size(),a=t._malloc(a),t._vsc_data(a,i,u);var c=o.length*o.BYTES_PER_ELEMENT;u=t._malloc(c),t.HEAP8.set(o,u),o=t._vsc_data_ctx_size(),o=t._malloc(o),t._vsc_data(o,u,c),c=r.transformedPasswordBufLen(),c=t._vsc_buffer_new_with_capacity(c);var l=r.transformedTweakBufLen();l=t._vsc_buffer_new_with_capacity(l);try{const r=t._vscp_pythia_transform(n,a,o,c,l);e.PythiaError.handleStatusCode(r);const i=t._vsc_buffer_bytes(c),s=t._vsc_buffer_len(c),f=t.HEAPU8.slice(i,i+s),u=t._vsc_buffer_bytes(l),h=t._vsc_buffer_len(l);return{transformedPassword:f,transformedTweak:t.HEAPU8.slice(u,u+h)}}finally{t._free(r),t._free(n),t._free(i),t._free(a),t._free(s),t._free(o),t._vsc_buffer_delete(c),t._vsc_buffer_delete(l)}}static prove(n,a,o,i,f){s.ensureByteArray("transformedPassword",n),s.ensureByteArray("blindedPassword",a),s.ensureByteArray("transformedTweak",o),s.ensureByteArray("transformationPrivateKey",i),s.ensureByteArray("transformationPublicKey",f);var u=n.length*n.BYTES_PER_ELEMENT;const c=t._malloc(u);t.HEAP8.set(n,c),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,c,u);var l=a.length*a.BYTES_PER_ELEMENT;u=t._malloc(l),t.HEAP8.set(a,u),a=t._vsc_data_ctx_size(),a=t._malloc(a),t._vsc_data(a,u,l);var h=o.length*o.BYTES_PER_ELEMENT;l=t._malloc(h),t.HEAP8.set(o,l),o=t._vsc_data_ctx_size(),o=t._malloc(o),t._vsc_data(o,l,h);var p=i.length*i.BYTES_PER_ELEMENT;h=t._malloc(p),t.HEAP8.set(i,h),i=t._vsc_data_ctx_size(),i=t._malloc(i),t._vsc_data(i,h,p);var _=f.length*f.BYTES_PER_ELEMENT;p=t._malloc(_),t.HEAP8.set(f,p),f=t._vsc_data_ctx_size(),f=t._malloc(f),t._vsc_data(f,p,_),_=r.proofValueBufLen(),_=t._vsc_buffer_new_with_capacity(_);var d=r.proofValueBufLen();d=t._vsc_buffer_new_with_capacity(d);try{const r=t._vscp_pythia_prove(n,a,o,i,f,_,d);e.PythiaError.handleStatusCode(r);const s=t._vsc_buffer_bytes(_),u=t._vsc_buffer_len(_),c=t.HEAPU8.slice(s,s+u),l=t._vsc_buffer_bytes(d),h=t._vsc_buffer_len(d);return{proofValueC:c,proofValueU:t.HEAPU8.slice(l,l+h)}}finally{t._free(u),t._free(n),t._free(r),t._free(a),t._free(s),t._free(o),t._free(l),t._free(i),t._free(h),t._free(f),t._vsc_buffer_delete(_),t._vsc_buffer_delete(d)}}static verify(r,n,a,o,i,f){s.ensureByteArray("transformedPassword",r),s.ensureByteArray("blindedPassword",n),s.ensureByteArray("tweak",a),s.ensureByteArray("transformationPublicKey",o),s.ensureByteArray("proofValueC",i),s.ensureByteArray("proofValueU",f);var u=r.length*r.BYTES_PER_ELEMENT;const c=t._malloc(u);t.HEAP8.set(r,c),r=t._vsc_data_ctx_size(),r=t._malloc(r),t._vsc_data(r,c,u);var l=n.length*n.BYTES_PER_ELEMENT;u=t._malloc(l),t.HEAP8.set(n,u),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,u,l);var h=a.length*a.BYTES_PER_ELEMENT;l=t._malloc(h),t.HEAP8.set(a,l),a=t._vsc_data_ctx_size(),a=t._malloc(a),t._vsc_data(a,l,h);var p=o.length*o.BYTES_PER_ELEMENT;h=t._malloc(p),t.HEAP8.set(o,h),o=t._vsc_data_ctx_size(),o=t._malloc(o),t._vsc_data(o,h,p);var _=i.length*i.BYTES_PER_ELEMENT;p=t._malloc(_),t.HEAP8.set(i,p),i=t._vsc_data_ctx_size(),i=t._malloc(i),t._vsc_data(i,p,_);var d=f.length*f.BYTES_PER_ELEMENT;let y;_=t._malloc(d),t.HEAP8.set(f,_),f=t._vsc_data_ctx_size(),f=t._malloc(f),t._vsc_data(f,_,d),d=t._vscp_error_ctx_size(),d=t._malloc(d),t._vscp_error_reset(d);try{y=t._vscp_pythia_verify(r,n,a,o,i,f,d);const s=t._vscp_error_status(d);return e.PythiaError.handleStatusCode(s),!!y}finally{t._free(s),t._free(r),t._free(u),t._free(n),t._free(l),t._free(a),t._free(h),t._free(o),t._free(p),t._free(i),t._free(_),t._free(f),t._free(d)}}static getPasswordUpdateToken(n,a){s.ensureByteArray("previousTransformationPrivateKey",n),s.ensureByteArray("newTransformationPrivateKey",a);var o=n.length*n.BYTES_PER_ELEMENT;const i=t._malloc(o);t.HEAP8.set(n,i),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,i,o);var f=a.length*a.BYTES_PER_ELEMENT;o=t._malloc(f),t.HEAP8.set(a,o),a=t._vsc_data_ctx_size(),a=t._malloc(a),t._vsc_data(a,o,f),f=r.passwordUpdateTokenBufLen(),f=t._vsc_buffer_new_with_capacity(f);try{const r=t._vscp_pythia_get_password_update_token(n,a,f);e.PythiaError.handleStatusCode(r);const o=t._vsc_buffer_bytes(f),i=t._vsc_buffer_len(f);return t.HEAPU8.slice(o,o+i)}finally{t._free(o),t._free(n),t._free(r),t._free(a),t._vsc_buffer_delete(f)}}static updateDeblindedWithToken(n,a){s.ensureByteArray("deblindedPassword",n),s.ensureByteArray("passwordUpdateToken",a);var o=n.length*n.BYTES_PER_ELEMENT;const i=t._malloc(o);t.HEAP8.set(n,i),n=t._vsc_data_ctx_size(),n=t._malloc(n),t._vsc_data(n,i,o);var f=a.length*a.BYTES_PER_ELEMENT;o=t._malloc(f),t.HEAP8.set(a,o),a=t._vsc_data_ctx_size(),a=t._malloc(a),t._vsc_data(a,o,f),f=r.deblindedPasswordBufLen(),f=t._vsc_buffer_new_with_capacity(f);try{const r=t._vscp_pythia_update_deblinded_with_token(n,a,f);e.PythiaError.handleStatusCode(r);const o=t._vsc_buffer_bytes(f),i=t._vsc_buffer_len(f);return t.HEAPU8.slice(o,o+i)}finally{t._free(o),t._free(n),t._free(r),t._free(a),t._vsc_buffer_delete(f)}}}return r})(e,r),t(r)},e.onAbort=t=>{r(Error(t))}})};let u;const c=t=>{if(u)return void console.warn("Pythia modules are already set. Further calls to `setPythiaModules` are ignored.");u=t;const{Pythia:e}=u;try{e.configure()}catch(t){throw e.cleanup(),t}},l=()=>{if(!u)throw new Error("You need to call `setPythiaModules` first");return u},h=()=>void 0!==u;function p(){return t=this,e=void 0,n=function*(){if(h())return void console.warn("Pythia modules are already set. Further calls to `initPythia` are ignored.");const t=yield f();c(t)},new((r=void 0)||(r=Promise))((function(a,o){function i(t){try{f(n.next(t))}catch(t){o(t)}}function s(t){try{f(n.throw(t))}catch(t){o(t)}}function f(t){t.done?a(t.value):new r((function(e){e(t.value)})).then(i,s)}f((n=n.apply(t,e||[])).next())}));var t,e,r,n}for(var _=function(t){var e=P(t),r=e[0],n=e[1];return 3*(r+n)/4-n},d=function(t){var e,r,n=P(t),a=n[0],o=n[1],i=new b(function(t,e,r){return 3*(e+r)/4-r}(0,a,o)),s=0,f=o>0?a-4:a;for(r=0;r<f;r+=4)e=w[t.charCodeAt(r)]<<18|w[t.charCodeAt(r+1)]<<12|w[t.charCodeAt(r+2)]<<6|w[t.charCodeAt(r+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=255&e;2===o&&(e=w[t.charCodeAt(r)]<<2|w[t.charCodeAt(r+1)]>>4,i[s++]=255&e);1===o&&(e=w[t.charCodeAt(r)]<<10|w[t.charCodeAt(r+1)]<<4|w[t.charCodeAt(r+2)]>>2,i[s++]=e>>8&255,i[s++]=255&e);return i},y=function(t){for(var e,r=t.length,n=r%3,a=[],o=0,i=r-n;o<i;o+=16383)a.push(A(t,o,o+16383>i?i:o+16383));1===n?(e=t[r-1],a.push(v[e>>2]+v[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],a.push(v[e>>10]+v[e>>4&63]+v[e<<2&63]+"="));return a.join("")},v=[],w=[],b="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,E=m.length;g<E;++g)v[g]=m[g],w[m.charCodeAt(g)]=g;function P(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function A(t,e,r){for(var n,a,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(v[(a=n)>>18&63]+v[a>>12&63]+v[a>>6&63]+v[63&a]);return o.join("")}w["-".charCodeAt(0)]=62,w["_".charCodeAt(0)]=63;var B,T={byteLength:_,toByteArray:d,fromByteArray:y},L={read:function(t,e,r,n,a){var o,i,s=8*a-n-1,f=(1<<s)-1,u=f>>1,c=-7,l=r?a-1:0,h=r?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+l],l+=h,c-=8);for(i=o&(1<<-c)-1,o>>=-c,c+=n;c>0;i=256*i+t[e+l],l+=h,c-=8);if(0===o)o=1-u;else{if(o===f)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,n),o-=u}return(p?-1:1)*i*Math.pow(2,o-n)},write:function(t,e,r,n,a,o){var i,s,f,u=8*o-a-1,c=(1<<u)-1,l=c>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,_=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,i=c):(i=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-i))<1&&(i--,f*=2),(e+=i+l>=1?h/f:h*Math.pow(2,1-l))*f>=2&&(i++,f/=2),i+l>=c?(s=0,i=c):i+l>=1?(s=(e*f-1)*Math.pow(2,a),i+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,a),i=0));a>=8;t[r+p]=255&s,p+=_,s/=256,a-=8);for(i=i<<a|s,u+=a;u>0;t[r+p]=255&i,p+=_,i/=256,u-=8);t[r+p-_]|=128*d}},S=(function(t,e){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},e.INSPECT_MAX_BYTES=50;var n=2147483647;function a(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return i(t,e,r)}function i(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|l(t,e),n=a(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return u(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(j(t,ArrayBuffer)||t&&j(t.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,o.prototype),n}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return o.from(n,e,r);var i=function(t){if(o.isBuffer(t)){var e=0|c(t.length),r=a(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}return void 0!==t.length?"number"!=typeof t.length||Y(t.length)?a(0):u(t):"Buffer"===t.type&&Array.isArray(t.data)?u(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return s(t),a(t<0?0:0|c(t))}function u(t){for(var e=t.length<0?0:0|c(t.length),r=a(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function c(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function l(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||j(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var a=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(a)return n?-1:I(t).length;e=(""+e).toLowerCase(),a=!0}}function h(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,r);case"utf8":case"utf-8":return P(this,e,r);case"ascii":return B(this,e,r);case"latin1":case"binary":return S(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function p(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function _(t,e,r,n,a){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=a?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(a)return-1;r=t.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof e&&(e=o.from(e,n)),o.isBuffer(e))return 0===e.length?-1:d(t,e,r,n,a);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):d(t,[e],r,n,a);throw new TypeError("val must be string, number or Buffer")}function d(t,e,r,n,a){var o,i=1,s=t.length,f=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;i=2,s/=2,f/=2,r/=2}function u(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(a){var c=-1;for(o=r;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===f)return c*i}else-1!==c&&(o-=o-c),c=-1}else for(r+f>s&&(r=s-f),o=r;o>=0;o--){for(var l=!0,h=0;h<f;h++)if(u(t,o+h)!==u(e,h)){l=!1;break}if(l)return o}return-1}function y(t,e,r,n){r=Number(r)||0;var a=t.length-r;n?(n=Number(n))>a&&(n=a):n=a;var o=e.length;n>o/2&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(e.substr(2*i,2),16);if(Y(s))return i;t[r+i]=s}return i}function v(t,e,r,n){return H(I(e,t.length-r),t,r,n)}function w(t,e,r,n){return H(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function b(t,e,r,n){return w(t,e,r,n)}function m(t,e,r,n){return H(z(e),t,r,n)}function g(t,e,r,n){return H(function(t,e){for(var r,n,a,o=[],i=0;i<t.length&&!((e-=2)<0);++i)r=t.charCodeAt(i),n=r>>8,a=r%256,o.push(a),o.push(n);return o}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?T.fromByteArray(t):T.fromByteArray(t.slice(e,r))}function P(t,e,r){r=Math.min(t.length,r);for(var n=[],a=e;a<r;){var o,i,s,f,u=t[a],c=null,l=u>239?4:u>223?3:u>191?2:1;if(a+l<=r)switch(l){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[a+1]))&&(f=(31&u)<<6|63&o)>127&&(c=f);break;case 3:o=t[a+1],i=t[a+2],128==(192&o)&&128==(192&i)&&(f=(15&u)<<12|(63&o)<<6|63&i)>2047&&(f<55296||f>57343)&&(c=f);break;case 4:o=t[a+1],i=t[a+2],s=t[a+3],128==(192&o)&&128==(192&i)&&128==(192&s)&&(f=(15&u)<<18|(63&o)<<12|(63&i)<<6|63&s)>65535&&f<1114112&&(c=f)}null===c?(c=65533,l=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),a+=l}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}e.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,r){return i(t,e,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,r){return function(t,e,r){return s(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},o.allocUnsafe=function(t){return f(t)},o.allocUnsafeSlow=function(t){return f(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(j(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,a=0,i=Math.min(r,n);a<i;++a)if(t[a]!==e[a]){r=t[a],n=e[a];break}return r<n?-1:n<r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=o.allocUnsafe(e),a=0;for(r=0;r<t.length;++r){var i=t[r];if(j(i,Uint8Array)&&(i=o.from(i)),!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a),a+=i.length}return n},o.byteLength=l,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?P(this,0,t):h.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(t,e,r,n,a){if(j(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),e<0||r>t.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&e>=r)return 0;if(n>=a)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(a>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),f=Math.min(i,s),u=this.slice(n,a),c=t.slice(e,r),l=0;l<f;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},o.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},o.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},o.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-e;if((void 0===r||r>a)&&(r=a),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return b(this,t,e,r);case"base64":return m(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function B(t,e,r){var n="";r=Math.min(t.length,r);for(var a=e;a<r;++a)n+=String.fromCharCode(127&t[a]);return n}function S(t,e,r){var n="";r=Math.min(t.length,r);for(var a=e;a<r;++a)n+=String.fromCharCode(t[a]);return n}function M(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var a="",o=e;o<r;++o)a+=D[t[o]];return a}function x(t,e,r){for(var n=t.slice(e,r),a="",o=0;o<n.length;o+=2)a+=String.fromCharCode(n[o]+256*n[o+1]);return a}function U(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,r,n,a,i){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function k(t,e,r,n,a,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(t,e,r,n,a){return e=+e,r>>>=0,a||k(t,0,r,4),L.write(t,e,r,n,23,4),r+4}function C(t,e,r,n,a){return e=+e,r>>>=0,a||k(t,0,r,8),L.write(t,e,r,n,52,8),r+8}o.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t],a=1,o=0;++o<e&&(a*=256);)n+=this[t+o]*a;return n},o.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t+--e],a=1;e>0&&(a*=256);)n+=this[t+--e]*a;return n},o.prototype.readUInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=this[t],a=1,o=0;++o<e&&(a*=256);)n+=this[t+o]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||U(t,e,this.length);for(var n=e,a=1,o=this[t+--n];n>0&&(a*=256);)o+=this[t+--n]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||U(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(t,e){t>>>=0,e||U(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||U(t,4,this.length),L.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||U(t,4,this.length),L.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||U(t,8,this.length),L.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||U(t,8,this.length),L.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||R(this,t,e,r,Math.pow(2,8*r)-1,0);var a=1,o=0;for(this[e]=255&t;++o<r&&(a*=256);)this[e+o]=t/a&255;return e+r},o.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||R(this,t,e,r,Math.pow(2,8*r)-1,0);var a=r-1,o=1;for(this[e+a]=255&t;--a>=0&&(o*=256);)this[e+a]=t/o&255;return e+r},o.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var a=Math.pow(2,8*r-1);R(this,t,e,r,a-1,-a)}var o=0,i=1,s=0;for(this[e]=255&t;++o<r&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},o.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var a=Math.pow(2,8*r-1);R(this,t,e,r,a-1,-a)}var o=r-1,i=1,s=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i>>0)-s&255;return e+r},o.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,r){return N(this,t,e,!0,r)},o.prototype.writeFloatBE=function(t,e,r){return N(this,t,e,!1,r)},o.prototype.writeDoubleLE=function(t,e,r){return C(this,t,e,!0,r)},o.prototype.writeDoubleBE=function(t,e,r){return C(this,t,e,!1,r)},o.prototype.copy=function(t,e,r,n){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var a=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var i=a-1;i>=0;--i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return a},o.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var a=t.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(t=a)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var s=o.isBuffer(t)?t:o.from(t,n),f=s.length;if(0===f)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%f]}return this};var O=/[^+\/0-9A-Za-z-_]/g;function I(t,e){var r;e=e||1/0;for(var n=t.length,a=null,o=[],i=0;i<n;++i){if((r=t.charCodeAt(i))>55295&&r<57344){if(!a){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(i+1===n){(e-=3)>-1&&o.push(239,191,189);continue}a=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(e-=3)>-1&&o.push(239,191,189);if(a=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return T.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,n){for(var a=0;a<n&&!(a+r>=e.length||a>=t.length);++a)e[a+r]=t[a];return a}function j(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}var D=function(){for(var t=new Array(256),e=0;e<16;++e)for(var r=16*e,n=0;n<16;++n)t[r+n]="0123456789abcdef"[e]+"0123456789abcdef"[n];return t}()}(B={exports:{}},B.exports),B.exports),M=S.Buffer;S.SlowBuffer,S.INSPECT_MAX_BYTES,S.kMaxLength;const x=(t=>(e,r)=>{if("string"==typeof e){if("string"==typeof r&&!t.isEncoding(r))throw new TypeError("Invalid default encoding");return t.from(e,r)}if(e instanceof Uint8Array)return e;if("object"==typeof e&&"string"==typeof e.value&&t.isEncoding(e.encoding))return t.from(e.value,e.encoding);throw new TypeError("Invalid format of Data")})(M),U=(t=>e=>{let r=t.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(r=r.slice(e.byteOffset,e.byteOffset+e.byteLength)),r})(M);class R{blind(t){const{Pythia:e}=l(),r=x(t,"utf8"),{blindedPassword:n,blindingSecret:a}=e.blind(r);return{blindedPassword:U(n),blindingSecret:U(a)}}deblind(t){const{Pythia:e}=l(),r=x(t.transformedPassword,"base64"),n=x(t.blindingSecret,"base64"),a=e.deblind(r,n);return U(a)}}class k{constructor(t){this.virgilBrainKeyCrypto=t||new R}blind(t){return this.virgilBrainKeyCrypto.blind(t)}deblind(t){return this.virgilBrainKeyCrypto.deblind(t)}computeTransformationKeyPair(t){const{Pythia:e}=l(),r=x(t.transformationKeyId,"base64"),n=x(t.pythiaSecret,"base64"),a=x(t.pythiaScopeSecret,"base64"),{transformationPrivateKey:o,transformationPublicKey:i}=e.computeTransformationKeyPair(r,n,a);return{privateKey:U(o),publicKey:U(i)}}transform(t){const{Pythia:e}=l(),r=x(t.blindedPassword,"base64"),n=x(t.tweak,"base64"),a=x(t.transformationPrivateKey,"base64"),{transformedPassword:o,transformedTweak:i}=e.transform(r,n,a);return{transformedPassword:U(o),transformedTweak:U(i)}}prove(t){const{Pythia:e}=l(),r=x(t.transformedPassword,"base64"),n=x(t.blindedPassword,"base64"),a=x(t.transformedTweak,"base64"),{proofValueC:o,proofValueU:i}=e.prove(r,n,a,t.transformationKeyPair.privateKey,t.transformationKeyPair.publicKey);return{proofValueC:U(o),proofValueU:U(i)}}verify(t){const{Pythia:e}=l(),r=x(t.transformedPassword,"base64"),n=x(t.blindedPassword,"base64"),a=x(t.tweak,"base64"),o=x(t.transformationPublicKey,"base64"),i=x(t.proofValueC,"base64"),s=x(t.proofValueU,"base64");return e.verify(r,n,a,o,i,s)}getPasswordUpdateToken(t){const{Pythia:e}=l(),r=x(t.oldTransformationPrivateKey,"base64"),n=x(t.newTransformationPrivateKey,"base64"),a=e.getPasswordUpdateToken(r,n);return U(a)}updateDeblindedWithToken(t){const{Pythia:e}=l(),r=x(t.deblindedPassword,"base64"),n=x(t.updateToken,"base64"),a=e.updateDeblindedWithToken(r,n);return U(a)}}export{R as VirgilBrainKeyCrypto,k as VirgilPythiaCrypto,l as getPythiaModules,h as hasPythiaModules,p as initPythia,c as setPythiaModules};
