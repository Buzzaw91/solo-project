let express,fs;_c83‍.x([["default",()=>_c83‍.o]]);_c83‍.w("express",[["default",["express"],function(v){express=v}]]);_c83‍.w("fs",[["default",["fs"],function(v){fs=v}]]);// This piece of code generates API endpoints dynamically
// Each folder will become APP_URL/folderName
// and each file will become APP_URL/folderName/filename


const router = express.Router();


function routeCreator() {
  // get all the folders from api folder
  const mainEndpoints = fs.readdirSync('api');

  // loop in all main API endpoints
  mainEndpoints.forEach(endpoint => {
    const fileNames = fs.readdirSync(`api/${endpoint}`)

    // get the contents of the files
    // each file has a method (post, get, etc...) and an action
    // and 'params' if its GET request
    // map them to have name as well

    const files = fileNames.map(x => {
      return {
        // get rid of the file extension
        name: x.replace('.js', ''),

        file: require(`../api/${endpoint}/${x}`).default
      }
    });

    // loop in mapped files
    files.forEach(route => {
      const { method, action, params} = route.file;
      const endpointUrl = `/${endpoint}/${params ? '' : route.name}${params ? params : ''}`;

      // dynamically set the express router endpoint
      router[method](endpointUrl, action);
      // console.log(router, 'HERE--------------------->')

    });

  });
  return router;
}
_c83‍.d(routeCreator);
