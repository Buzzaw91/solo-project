let socketioJwt,config;_bd1‍.x([["default",()=>_bd1‍.o]]);_bd1‍.w("socketio-jwt",[["default",["socketioJwt"],function(v){socketioJwt=v}]]);_bd1‍.w("./index",[["default",["config"],function(v){config=v}]]);


const _bd1‍anonymous=io => {
  // JWT middleware for socket.io
  io.use(socketioJwt.authorize({
    secret: config.JWT_SECRET,
    handshake: true
  }))

  // fires when a user is connected
  // this only happens when a user authenticates (after login)
  io.on('connection', (socket) => {
    const userId = socket.decoded_token.id

    _bd1‍.g.console.log('a user connected', socket.id)

    // create a room with userId
    // useful for sending data to a single online user
    socket.join(userId)

    // join all-users room. we use this to send the changes to all online users
    socket.join('all-users')

    // no need to leave room, because socket.io automatically does that
    socket.on('disconnect', () => {
      _bd1‍.g.console.log('a user disconnected', userId)
    })
  })
};_bd1‍.d(_bd1‍anonymous);
